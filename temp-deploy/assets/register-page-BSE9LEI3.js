import{r,a as N,j as e,A as S,R as k}from"./index-BS_hr4Ly.js";function C(){const[n,h]=r.useState(""),[l,g]=r.useState(""),[t,f]=r.useState(""),[i,p]=r.useState(""),[d,j]=r.useState("broker"),[u,c]=r.useState(!1),[m,a]=r.useState(null),[b,w]=r.useState(null),[,x]=N(),y=async s=>{if(s.preventDefault(),!n||!l||!t){a("Todos os campos são obrigatórios.");return}if(t!==i){a("As senhas não coincidem.");return}c(!0),a(null);try{const o=await fetch(`${S}${k}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:l,password:t,role:d})}),v=await o.json();if(!o.ok)throw new Error(v.message||"Erro ao registrar usuário");w("Usuário registrado com sucesso!"),setTimeout(()=>{x("/auth")},2e3)}catch(o){console.error("Erro no registro:",o),a(o.message||"Falha ao registrar usuário. Tente novamente.")}finally{c(!1)}};return e.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-blue-600",children:"BrokerBooster"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Registro de Novo Usuário"})]}),b?e.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:[e.jsx("p",{children:b}),e.jsx("p",{className:"text-sm",children:"Redirecionando para o login..."})]}):e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nome Completo"}),e.jsx("input",{id:"name",name:"name",type:"text",required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:n,onChange:s=>h(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:l,onChange:s=>g(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Senha"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:t,onChange:s=>f(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmar Senha"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:i,onChange:s=>p(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Tipo de Usuário"}),e.jsxs("select",{id:"role",name:"role",value:d,onChange:s=>j(s.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"broker",children:"Corretor"}),e.jsx("option",{value:"manager",children:"Gerente"}),e.jsx("option",{value:"director",children:"Diretor"})]})]}),m&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:m}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{type:"button",onClick:()=>x("/auth"),className:"text-sm text-blue-600 hover:text-blue-500",children:"Já possui conta? Faça login"}),e.jsx("button",{type:"submit",disabled:u,className:"flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:u?"Registrando...":"Registrar"})]})]})]})})}export{C as default};
